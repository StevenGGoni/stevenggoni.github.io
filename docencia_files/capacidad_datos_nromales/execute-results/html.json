{
  "hash": "b5384e270782ca042a58601e0890002d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Análisis de capacidad en R para datos normales\"\ndate: today\nformat:\n  html:\n    toc: true\n    collapse-sections: true\nexecute:\n  warning: false\n  message: false\n---\n\n# Introducción\n\nAl finalizar la Fase I, cuando los gráficos de control hayan demostrado que el proceso se encuentra bajo control y en un nivel aceptable, se pueden calcular los PCR para documentar el estado del proceso.\n\n# Librerías\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(qcc)\nlibrary(SixSigma)\nlibrary(openxlsx) # para leer archivos en Excel\nlibrary(nortest) # pruebas de normalidad\n```\n:::\n\n\n# Análisis de capacidad de proceso - Variables\n\nEmpecemos por cargar los datos.\n\n<a href=\"datos/Datos para Capacidad en R.xlsx\" download>Descargar datos</a>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos <- openxlsx::read.xlsx(\"datos/Datos para Capacidad en R.xlsx\")\n```\n:::\n\n\n## Usando `qcc`\n\nLuego, se verifica que que el proceso se encuentre bajo control estadístico, para ello vamos a comenzar con un gráfico $\\bar{x}-R$.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nX_R <- qcc::qcc(datos, type = \"xbar\")\n```\n\n::: {.cell-output-display}\n![](capacidad_datos_nromales_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(X_R)\n```\n:::\n\n\nEl segundo requisito, es que los datos sigan la distribución normal. Por ejemplo, con un $\\alpha=0.001$.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nas.matrix(datos) %>% \n  shapiro.test()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tShapiro-Wilk normality test\n\ndata:  .\nW = 0.95336, p-value = 0.00139\n```\n\n\n:::\n:::\n\n\nUna vez resuelto esto, se puede evaluar la capacidad del proceso.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqcc::process.capability(X_R, spec.limits = c(7.115, 7.135), target = 7.125)\n```\n\n::: {.cell-output-display}\n![](capacidad_datos_nromales_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nProcess Capability Analysis\n\nCall:\nqcc::process.capability(object = X_R, spec.limits = c(7.115,     7.135), target = 7.125)\n\nNumber of obs = 100          Target = 7.125\n       Center = 7.125           LSL = 7.115\n       StdDev = 0.002098        USL = 7.135\n\nCapability indices:\n\n      Value   2.5%  97.5%\nCp    1.589  1.368  1.809\nCp_l  1.573  1.381  1.765\nCp_u  1.605  1.409  1.800\nCp_k  1.573  1.344  1.801\nCpm   1.587  1.367  1.807\n\nExp<LSL 0%\t Obs<LSL 0%\nExp>USL 0%\t Obs>USL 0%\n```\n\n\n:::\n:::\n\n\n## Usando `SixSigma`\n\nEste paquete puede ser un poco más sencillo de usar. Pero necesita los datos en una sola columna.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos_una_col <- datos %>% \n  tidyr::pivot_longer(everything())\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSixSigma::ss.study.ca(xST = datos_una_col$value, # corto plazo\n                      xLT = datos_una_col$value, # largo plazo\n                      Target = 7.115, LSL=7.135,USL=7.125)\n```\n\n::: {.cell-output-display}\n![](capacidad_datos_nromales_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n# Análisis de capacidad de proceso - Atributos\n\nEl análisis de capacidad por atributos se aplica cuando la variable de interés no se mide de forma continua, sino que se clasifica en categorías discretas (por ejemplo, unidades defectuosas o número de defectos). A diferencia de los índices $C_p$ y $C_pk$, que asumen normalidad y datos continuos, en este caso se evalúa el porcentaje de no conformidades (p) o el número promedio de defectos por unidad (c, u). La comparación se realiza frente a un valor máximo permitido, definido por especificaciones o normas del cliente.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Datos de ejemplo\nno_conformes <- c(3, 2, 1, 4, 2, 3, 0, 5, 2, 3, 1, 4, 2, \n                  3, 2, 1, 4, 2, 3, 3, 2, 4, 1, 3, 2)\ntamano_muestra <- rep(100, length(no_conformes))\n\n# Gráfico p (proporción de no conformes)\ngrafico_p <- qcc::qcc(no_conformes, sizes = tamano_muestra, type = \"p\")\n```\n\n::: {.cell-output-display}\n![](capacidad_datos_nromales_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(grafico_p)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Evaluación de capacidad para atributos\np_promedio <- grafico_p$center\np_max <- 0.03\ncpk <- (p_max - p_promedio)/(3*sqrt(p_promedio * \n                                      (1 - p_promedio)/mean(tamano_muestra)))\ncpk\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.1114575\n```\n\n\n:::\n:::\n\n\n# ¿Cómo modificar valores?\n\nSi se desea establecer otros límites de control, el centro o nominal del proceso, u otros detalles, puede consultar la documentación de la función con `help(process.capability)`\n\n# Bibliografía\n\n-   Lawson, J. (2021). An Introduction to acceptance sampling and SPC with R. CRC Press.\n",
    "supporting": [
      "capacidad_datos_nromales_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}